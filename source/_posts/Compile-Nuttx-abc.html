---
title: ""
date: 
layout: post
categories: 
tags: 
published: true
comments: 
---
<p>
&#x2014;
layout: post
title: Compile Nuttx RTOS on Ubuntu
&#x2014;
在Ubuntu下编译Nuttx实时操作系统
</p>

<p>
<b><b>1. Download Nuttx source files</b></b>
</p>

<p>
<b><b><b>1.1 Download using git</b></b></b>
</p>

<p>
Main command:
</p>

<p>
```
 $ git clone <a href="https://bitbucket.org/patacongo/nuttx.git">https://bitbucket.org/patacongo/nuttx.git</a> nuttx
 $ git clone <a href="https://bitbucket.org/nuttx/apps.git">https://bitbucket.org/nuttx/apps.git</a> apps
 $ cd nuttx
 $ git submodule init
 $ git submodule update
```
The following is optional:
</p>

<p>
```
 $ git config &#x2013;global user.name "My Name"
 $ git config &#x2013;global user.email my.name@example.com
 $ git config &#x2013;global color.branch auto
 $ git config &#x2013;global color.diff auto
 $ git config &#x2013;global color.interactive auto
 $ git config &#x2013;global color.status auto
```
</p>

<p>
<b><b><b>1.2 Download from sourceforge</b></b></b>
</p>

<p>
Web URL: <a href="http://sourceforge.net/projects/nuttx/">http://sourceforge.net/projects/nuttx/</a>
</p>

<p>
<b><b>2.Configure the compile environment</b></b>
</p>

<p>
<b><b><b>2.1 Configure gcc-arm-none-eabi tool</b></b></b>
</p>

<p>
2.1.1 Download the tar.bz2 file 
</p>

<p>
Web URL: <a href="https://launchpad.net/gcc-arm-embedded/+download">https://launchpad.net/gcc-arm-embedded/+download</a>
</p>

<p>
2.1.2 Extract the tar.bz2 file
</p>

<p>
```
$ tar -xjvf gcc-arm-none-eabi-xxxxxxxxxxx.tar.bz2
```
</p>

<p>
2.1.3 Install gcc-arm-none-eabi
</p>

<p>
```
$ sudo cp -r gcc-arm-none-eabi-xxxxxxxxxx /usr/srci
```
</p>

<p>
2.1.4 Add to the environment
</p>

<p>
Add "export PATH=$PATH:/usr/src/gcc/arm-none-eabi-xxxxxxxxxx/bin" at the end of the /etc/profile
</p>

<p>
2.1.5 If 64 bit system, it can't find arm-none-eabi-gcc, please install the ia32-libs
</p>

<p>
```
$ sudo apt-get install ia32-libs
```
</p>

<p>
Tips:  Ubuntu has removed the ia32-libs since 13.10. So in 13.10+, do the following:
</p>

<p>
```
$ cd <i>etc/apt/sources.list.d
$ echo "deb <a href="http://old-releases.ubuntu.com/ubuntu">http://old-releases.ubuntu.com/ubuntu</a></i> raring main restricted universe multiverse" &gt; ia32-libs-raring.list
$ sudo apt-get update
$ sudo apt-get install ia32-libs
```
</p>

<p>
When finished, remove the ia32-libs-raring.list, and do sudo apt-get update
</p>

<p>
2.1.6 Add "source <i>etc/profile" at the end of the "~</i>.bashrc", to setup the enviroment every terminal start.
</p>

<p>
<b><b><b>2.2 Install "kconfig-mconf" tool</b></b></b>
</p>

<p>
2.2.1 Download from <a href="http://ymorin.is-a-geek.org/projects/kconfig-frontends">http://ymorin.is-a-geek.org/projects/kconfig-frontends</a>
</p>

<p>
2.2.2 Extract and install
</p>

<p>
```
$ tar -xjvf kconfig-frontends-xxxx.tar.bz2
$ cd kconfig-frontends-xxxx
$ ./configure &#x2013;enable-mconf
$ make 
$ make install
```
</p>

<p>
Tips:  when the not find gperf, flex and parser generator, do 
</p>

<p>
```
$ sudo apt-get install gperf
$ sudo apt-get install flex
$ sudo apt-get install bison
```
</p>

<p>
<b><b>3.Compile Nuttx</b></b>
</p>

<p>
```
$ cd ${TODIR}
$ cd tools
$ ./configure.sh -a &lt;app-dir&gt; &lt;board-name&gt;[/&lt;config-dir&gt;]
```
</p>

<p>
If the apps in the standard path(../apps or ../apps-&lt;verison&gt;&lt;/verison&gt;), we can do this simple,
</p>

<p>
```
$ ./configure.sh &lt;board-name&gt;[/&lt;config-dir&gt;]
$ cd ${TOPDIR}
$ source setenv.sh
$ make
```
</p>

<p>
For example, the simulation (This example need install zlib1g-dev: sudo apt-get install zlib1g-dev)
</p>

<p>
```
$ cd tools
$ ./configure.sh sim/nsh
$ cd ..
$ make 
```
</p>
